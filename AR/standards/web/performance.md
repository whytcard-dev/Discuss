# معايير أداء الويب

## أهداف الأداء

- درجة Lighthouse: 90+ لجميع المقاييس
- أهداف Core Web Vitals:
- LCP (أكبر وقت لرسم المحتوى): أقل من 2.5 ثانية
- FID (تأخير الإدخال الأول): أقل من 100 مللي ثانية
- CLS (التحول التراكمي للتخطيط): أقل من 0.1
- INP (التفاعل مع الرسم التالي): أقل من 200 مللي ثانية
- وقت التفاعل: أقل من 3 ثوانٍ
- أول رسم محتوى: أقل من 1.8 ثانية
- الوزن الإجمالي للصفحة: أقل من 1 ميجابايت (يفضل أقل من 500 كيلوبايت)
- طلبات HTTP: أقل من 50 لكل صفحة

## تحسين الصور

- استخدام تنسيقات WebP/AVIF مع بدائل للمتصفحات القديمة
- تنفيذ صور متجاوبة باستخدام سمات `srcset` و`sizes`
- تحميل الصور ببطء أسفل الصفحة
- ضبط حجم الصور بشكل صحيح (تجنب عرض صور كبيرة مُصغّرة عبر CSS)
- استخدم شبكة توصيل المحتوى للصور لتغيير الحجم ديناميكيًا قدر الإمكان.
- حسّن ملفات SVG واحذف البيانات الوصفية غير الضرورية.
- اضغط جميع الصور باستخدام أدوات مثل ImageOptim وTinyPNG وSquaosh.
- جرّب تقنية التمويه للتحميل التدريجي.

## تحسين جافا سكريبت

- طبّق تقسيم الكود والاستيراد الديناميكي.
- أجّل جافا سكريبت غير المهمة.
- استخدم خوارزمية اهتزاز الشجرة للتخلص من الكود الميت.
- صغّر ملفات جافا سكريبت وضغطها.
- تجنّب جافا سكريبت التي تعيق العرض.
- استخدم برامج Web Workers للمهام التي تستهلك الكثير من وحدة المعالجة المركزية.
- طبّق تحديد أولويات الطلبات.
- حسّن نصوص الجهات الخارجية واستخدم سمات غير متزامنة/مؤجلة.

## تحسين CSS

- قلّل من ملفات CSS المهمة وضمّنها.
- أزل ملفات CSS غير المستخدمة باستخدام أدوات مثل PurgeCSS.
- تجنّب استيراد ملفات CSS (استخدم التجميع). بدلاً من ذلك)
- استخدام احتواء CSS للمكونات المستقلة
- تحسين محددات CSS لتحسين الأداء
- مراعاة آثار أداء CSS في JS
- استخدام متغيرات CSS لتحسين قابلية الصيانة
- تطبيق تقسيم أكواد CSS للتطبيقات الكبيرة

## تحسين الخطوط

- استخدام خطوط النظام عند الإمكان
- تطبيق عرض الخطوط: مبادلة أو اختياري
- تجزئة الخطوط لتشمل الأحرف الضرورية فقط
- استضافة الخطوط ذاتيًا بدلاً من استخدام خدمات خارجية
- تحميل الخطوط المهمة مسبقًا
- استخدام خطوط متغيرة لأوزان/أنماط متعددة
- الحد من تنوع الخطوط (الأوزان، الأنماط)

## استراتيجية التخزين المؤقت

- تطبيق سياسات تخزين مؤقت فعالة
- تخزين مؤقت طويل للأصول الثابتة (سنة فأكثر)
- تخزين مؤقت قصير/بدون تخزين مؤقت لـ HTML
- استخدام أسماء ملفات مُنسَّقة أو سلاسل استعلام لكسر ذاكرة التخزين المؤقت
- تطبيق عاملي الخدمة للدعم دون اتصال
- استخدام localStorage/IndexedDB من جانب العميل التخزين المؤقت
- تهيئة رؤوس ذاكرة التخزين المؤقت HTTP بشكل صحيح
- تنفيذ التخزين المؤقت لشبكة توصيل المحتوى (CDN)

## تحسين الخادم

- تفعيل HTTP/2 أو HTTP/3
- تنفيذ ضغط من جانب الخادم (Brotli/Gzip)
- استخدام شبكة توصيل المحتوى (CDN) لتقديم المحتوى العالمي
- تحسين استجابات واجهة برمجة التطبيقات (الترقيم، تحديد الحقول)
- تنفيذ الحوسبة الطرفية للمحتوى الديناميكي
- تهيئة إعدادات CORS المناسبة
- تحسين وقت الوصول إلى أول بايت (TTFB)
- استخدام تلميحات التوصيل المسبق، والجلب المسبق، والتحميل المسبق لـ HTTP

## تحسين الأجهزة المحمولة

- إعطاء الأولوية لأداء الأجهزة المحمولة (نهج "الأجهزة المحمولة أولاً")
- تحسين أهداف اللمس (الحد الأدنى 44×44 بكسل)
- تقليل حمولة الشبكة للأجهزة المحمولة
- تنفيذ أنماط تصميم متجاوبة
- الاختبار على الأجهزة المحمولة الفعلية، وليس فقط على المحاكيات
- مراعاة تقليل الحركة للرسوم المتحركة
- التحسين للاتصال غير المتصل/ضعيف الاتصال السيناريوهات

## المراقبة والاختبار

- تطبيق مراقبة المستخدم الفعلي (RUM)
- إعداد مراقبة اصطناعية لتدفقات المستخدمين الحرجة
- استخدام WebPageTest لتحليل الأداء التفصيلي
- مراقبة مؤشرات الويب الحيوية الأساسية في Google Search Console
- إعداد ميزانيات وتنبيهات الأداء
- إجراء عمليات تدقيق أداء دورية
- تطبيق اختبار A/B لتحسين الأداء
- استخدام لوحة أداء Chrome DevTools لإنشاء ملفات تعريف

## تقنيات متقدمة

- تطبيق تلميحات الموارد (الاتصال المسبق، التحميل المسبق، الجلب المسبق)
- استخدام مراقب التقاطع للتحميل الكسول
- مراعاة العرض من جانب الخادم أو إنشاء موقع ثابت
- تطبيق نمط "البقاء قديمًا أثناء إعادة التحقق"
- استخدام requestIdleCallback للمهام غير الحرجة
- مراعاة خرائط الاستيراد لتحميل الوحدات
- تطبيق الجلب المسبق التنبئي بناءً على سلوك المستخدم
- استخدام تلميحات الأولوية للموارد الحرجة
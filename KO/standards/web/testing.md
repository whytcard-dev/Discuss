# 웹 테스트 표준

## 테스트 철학

- 조기에 자주 테스트
- 가능한 경우 테스트를 자동화
- 적절한 수준(단위, 통합, e2e)에서 테스트
- 유지 관리 가능하고 신뢰할 수 있는 테스트 작성
- 성공적인 경로와 예외 상황 모두 테스트
- 회귀 방지를 위한 테스트 활용
- 비즈니스 영향도를 기준으로 테스트 우선순위 지정
- 테스트 코드를 프로덕션 코드와 동일하게 신중하게 관리

## 테스트 유형 및 커버리지

### 단위 테스트

- **대상**: 개별 함수, 컴포넌트 및 모듈
- **커버리지 목표**: 비즈니스 로직 및 유틸리티의 80% 이상
- **도구**: Jest, Vitest, React 테스트 라이브러리
- **모범 사례**:
- AAA 패턴(Arrange, Act, Assert) 준수
- 가능한 경우 테스트당 하나의 어설션 사용
- 외부 종속성 모의
- 예외 상황 및 오류 조건 테스트
- 테스트 속도 유지(< 100ms) 테스트당)
- 설명적인 테스트 이름 사용
- 테스트를 서로 분리

### 통합 테스트

- **목표**: 컴포넌트와 서비스 간의 상호작용
- **커버리지 목표**: 주요 사용자 흐름 및 컴포넌트 상호작용
- **도구**: React 테스트 라이브러리, MSW, Supertest
- **모범 사례**:
- 컴포넌트 구성 테스트
- 폼 제출 테스트
- API 응답 모의
- 상태 변경 테스트
- DOM 업데이트 확인
- 라우팅 및 탐색 테스트
- 현실적인 테스트 데이터 사용

### 엔드 투 엔드 테스트

- **목표**: UI에서 백엔드까지 사용자 흐름 완료
- **커버리지 목표**: 주요 비즈니스 경로 및 사용자 여정
- **도구**: Cypress, Playwright
- **모범 사례**:
- 주요 사용자 여정에 집중
- 여러 브라우저에서 테스트
- 안정적인 선택자 사용 (data-testid)
- 격리된 테스트 환경 설정
- 테스트 데이터 효과적 관리
- 실패 시 스크린샷 촬영
- 불안정한 테스트에 대한 재시도 로직 구현

### 시각적 회귀 테스트

- **대상**: UI 모양 및 레이아웃
- **커버리지 목표**: 주요 UI 구성 요소 및 페이지
- **도구**: Percy, Chromatic, Playwright
- **모범 사례**:
- 기준 스크린샷 캡처
- 다양한 뷰포트에서 테스트
- 동적 콘텐츠 무시
- 시각적 변경 사항 신중히 검토
- 밝음/어두움 모드 테스트
- 다양한 콘텐츠 길이로 테스트
- CI/CD 파이프라인 통합

### 접근성 테스트

- **대상**: WCAG 준수 및 접근성 문제
- **커버리지 목표**: 모든 사용자 대상 구성 요소 및 페이지
- **도구**: axe, Lighthouse, WAVE
- **모범 사례**:
- 키보드 탐색 테스트
- 스크린 리더 호환성 확인
- 색상 대비 확인
- 포커스 관리 테스트
- ARIA 속성 확인
- 보조 기술 테스트
- 기본 접근성 검사 자동화

### 성능 테스트

- **목표**: 페이지 로드 시간, 렌더링 성능
- **커버리지 목표**: 주요 페이지 및 중요 사용자 경로
- **도구**: Lighthouse, WebPageTest, k6
- **모범 사례**:
- 핵심 웹 바이탈 측정
- 저사양 기기 테스트
- 네트워크 제한 시뮬레이션
- 번들 크기 모니터링
- 현실적인 캐싱 시나리오 테스트
- 상호작용 시간 측정
- 성능 예산 설정

## 테스트 사례

### 테스트 구성

- 기능 또는 구성 요소별로 논리적으로 테스트 그룹화
- 설명적인 파일 이름 및 테스트 설명 사용
- 테스트 유틸리티 및 픽스처 분리
- 코드베이스를 반영하는 계층 구조로 테스트 구성
- 테스트 파일을 테스트하는 코드와 가깝게 유지하세요.
- 일관된 명명 규칙을 사용하세요.
- 단위, 통합 및 e2e 테스트를 분리하세요.

### 테스트 데이터 관리

- 테스트 데이터에 팩토리 또는 빌더를 사용하세요.
- 하드코딩된 테스트 데이터를 지양하세요.
- 운영 패턴과 일치하는 현실적인 데이터를 사용하세요.
- 테스트 간에 테스트 상태를 재설정하세요.
- 테스트 환경을 분리하세요.
- 테스트 데이터의 데이터 프라이버시를 고려하세요.
- 예외적인 경우 시드된 무작위 데이터를 사용하세요.

### 모킹 및 스터빙

- 외부 종속성(API, 서비스) 모킹
- 현실적인 모킹 응답을 사용하세요.
- 테스트 간에 모킹을 재설정하세요.
- 과도한 모킹을 지양하세요.
- 적절한 수준에서 모킹하세요.
- 모킹 동작을 문서화하세요.
- API 모킹에 MSW를 사용하세요.

### 지속적 통합

- 모든 풀 리퀘스트에 대해 테스트를 실행하세요.
- 병렬 테스트 실행을 구현하세요.
- 테스트 보고 및 대시보드를 설정하세요.
- 테스트 실패 알림을 구성하세요.
- 불안정한 테스트에 대한 테스트 재시도를 구현하세요.
- 테스트 캐시 종속성
- 적절한 단계에서 다양한 테스트 유형 실행

## 테스트 주도 개발(TDD)

- 기능 구현 전 테스트 작성
- Red-Green-Refactor 주기 준수
- 간단한 테스트 케이스부터 시작
- 점진적으로 복잡성 추가
- 테스트를 활용하여 설계 추진
- 코드 발전에 따라 테스트 리팩토링
- 구현보다는 동작에 집중

## 테스트 유지 관리

- 정기적인 테스트 검토 및 업데이트
- 불안정한 테스트 제거 또는 수정
- 코드 변경 시 테스트 리팩토링
- 테스트 성능 모니터링
- 정기적인 테스트 커버리지 분석
- 테스트 전략 문서화
- 팀원에게 테스트 방법 교육

## 전문 테스트

### API 테스트

- 모든 API 엔드포인트 테스트
- 요청/응답 스키마 검증
- 인증 및 권한 부여 테스트
- 오류 처리 및 상태 코드 테스트
- 비즈니스 로직 검증
- 속도 제한 및 할당량 테스트
- API 테스트 케이스 문서화

### 상태 관리 테스트

- 상태 전환 테스트
- 초기 상태 검증
- 리듀서 및 액션 테스트
- 선택기 및 파생 상태 테스트
- 외부 종속성 모의
- 비동기 상태 변경 테스트
- 상태 지속성 검증

### 폼 테스트

- 폼 제출 테스트
- 폼 입력 검증
- 오류 상태 테스트
- 폼 재설정 기능 테스트
- 조건부 폼 로직 테스트
- 폼 요소의 접근성 검증
- 키보드 탐색 기능이 있는 폼 테스트

### 보안 테스트

- 인증 흐름 테스트
- 권한 부여 확인 검증
- 일반적인 취약점(XSS, CSRF) 테스트
- 입력 데이터 무결성 검증
- 파일 업로드 보안 테스트
- 보안 헤더 검증
- OWASP Top 10 테스트
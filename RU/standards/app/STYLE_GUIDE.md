# Общее руководство по стилю для WhytCard ## Введение Этот документ определяет общий стиль кодирования и лучшие практики для всех языков и технологий, используемых в проекте WhytCard. Эти стандарты обеспечивают согласованность, поддерживаемость и качество во всей кодовой базе. ## Содержание 1. [Основные принципы](#fundamental-principles) 2. [Соглашения об именовании](#naming-conventions) 3. [Форматирование](#formatting) 4. [Документация](#documentation) 5. [Структура кода](#code-structure) 6. [Инструкции, специфичные для языка](#language-specific-guidelines) 7. [Управление версиями](#version-control) ## Основные принципы ### Ясность вместо остроумия Всегда отдавайте приоритет ясности кода, а не остроумным или сложным решениям: - Пишите код, который легко понять - Избегайте непонятных языковых функций, если это не необходимо - Отдавайте приоритет читабельности и поддерживаемости, а не краткости ### Последовательность Поддерживайте последовательность во всей кодовой базе: - Следуйте установленным шаблонам в проекте - Не смешивайте разные стили или подходы - При изменении существующего кода следуйте его стилю ### DRY (Не повторяйтесь) Избегайте дублирования кода: - Извлекайте повторяющийся код в функции или классы - Создавайте общие утилиты для общих операций - Используйте наследование или композицию для общего поведения ### KISS (Keep It Simple, Stupid) Предпочитайте простые решения сложным: - Начните с самого простого подхода, который работает - Усложняйте только при необходимости - Разбивайте сложные проблемы на более простые части ### YAGNI (You Aren&#39;t Gonna Need It) Не добавляйте функциональность, пока она не станет необходимой: - Избегайте спекулятивных функций - Реализуйте только то, что требуется сейчас - Проводите рефакторинг при необходимости, а не упреждающе ## Соглашения об именовании ### Общие правила - Имена должны быть описательными и отражать цель - Используйте полные слова, а не сокращения (за исключением общеупотребительных) - Соответствуйте существующим шаблонам именования ### Стили регистра Используйте соответствующий стиль регистра для каждого языка: - **camelCase**: переменные и функции JavaScript/TypeScript - **PascalCase**: классы в большинстве языков, компоненты React - **snake_case**: Переменные и функции Python - **kebab-case**: элементы HTML, классы CSS, имена файлов - **UPPER_SNAKE_CASE**: константы в большинстве языков ### Примеры именования ```javascript // JavaScript const userProfile = { firstName: &#39;John&#39;, lastName: &#39;Doe&#39;, EMAIL_REGEX: /^[^@]+@[^@]+\.[^@]+$/, }; function calculateTotalPrice(items) { // Реализация } class UserManager { // Реализация } ``` ```python # Python user_profile = { &quot;first_name&quot;: &quot;John&quot;, &quot;last_name&quot;: &quot;Doe&quot;, &quot;EMAIL_REGEX&quot;: r&quot;^[^@]+@[^@]+\.[^@]+$&quot;, } def calculate_total_price(items): # Проход реализации class UserManager: # Проход реализации ``` ## Форматирование ### Отступы - Используйте одинаковые отступы во всем проекте - Для JavaScript/TypeScript/HTML/CSS: 2 пробела - Для Python: 4 пробела (PEP 8) - Никогда не смешивайте табуляции и пробелы ### Длина строки - Ограничьте строки максимум 100 символами для большинства языков - Для Python следуйте PEP 8 (79 символов для кода, 72 для комментариев) - Разбивайте длинные строки естественным для языка способом ### Интервалы - Используйте пробелы вокруг операторов - Используйте пробелы после Запятые и точки с запятой - Используйте одинаковые интервалы в вызовах и объявлениях функций ### Скобки и блоки - Открывающие скобки на одной строке для большинства языков (за исключением функций и классов Python) - Последовательное использование скобок даже для однострочных блоков - Выравнивайте закрывающие скобки с началом открывающей строки ### Примеры ```javascript // JavaScript function calculateDiscount(price, discountPercent) { if (price &lt;= 0) { return 0; } const discount = price * (discountPercent / 100); return discount; } const items = [ { name: &#39;Item 1&#39;, price: 10 }, { name: &#39;Item 2&#39;, price: 20 }, { name: &#39;Item 3&#39;, price: 30 }, ]; ``` ```python # Python def calculate_discount(price, discount_percent): if price &lt;= 0: return 0 discount = price * (discount_percent / 100) return discount items = [ {&quot;name&quot;: &quot;Item 1&quot;, &quot;price&quot;: 10}, {&quot;name&quot;: &quot;Item 2&quot;, &quot;price&quot;: 20}, {&quot;name&quot;: &quot;Item 3&quot;, &quot;price&quot;: 30}, ] ``` ## Документация ### Комментарии к коду - Используйте комментарии для объяснения &quot;почему&quot;, а не &quot;что&quot; - Комментируйте сложные алгоритмы или неочевидные решения - Поддерживайте комментарии в актуальном состоянии с изменениями кода - Избегайте избыточных или очевидных комментариев ### Документация функций и методов Документируйте все функции и методы с помощью: - Описание назначения - Параметры и их типы - Возвращаемое значение и тип - Исключения, которые могут быть выданы - Примеры использования сложных функций ### Заголовки файлов Включайте в начало каждого файла: - Краткое описание назначения файла - Информация об авторе(ах) - Дата создания - Информация о лицензии ### Примеры ```javascript /** * Рассчитывает общую стоимость товаров после применения скидок. * * @param {Array<Object> } items - Массив объектов item со свойством price * @param {number} discountPercent - Процент скидки (0-100) * @returns {number} Общая цена после скидки * * @example * const items = [{ price: 10 }, { price: 20 }]; * const total = calculateTotalPrice(items, 10); // Возвращает 27 */ function calculateTotalPrice(items, discountPercent) { // Реализация } ``` ```python def calculate_total_price(items, discount_percent): &quot;&quot;&quot; Рассчитать общую стоимость товаров после применения скидок. Аргументы: items: Список словарей со свойством price discount_percent: Процент скидки (0-100) Возвращает: float: Общая стоимость после скидки Пример: items = [{&quot;price&quot;: 10}, {&quot;price&quot;: 20}] total = calculate_total_price(items, 10) # Возвращает 27 &quot;&quot;&quot; # Реализация ``` ## Структура кода ### Организация файлов - Один основной класс/компонент на файл - Группировка связанной функциональности в одном каталоге - Отделение интерфейса от реализации, когда это уместно - Сохраняйте файлы разумного размера (&lt; 500 строк в качестве рекомендации) ### Размер функций и методов - Сохраняйте функции и методы небольшими и целенаправленными - Стремитесь к функциям, которые хорошо выполняют одну задачу - Ограничьте длину функции (рекомендуется &lt; 50 строк) - Выделите сложную логику во вспомогательные функции ### Управление зависимостями - Минимизируйте зависимости между модулями - Используйте внедрение зависимостей для уменьшения связанности - Четко документируйте зависимости модулей - Избегайте циклических зависимостей ### Обработка ошибок - Обрабатывайте ошибки на соответствующем уровне - Используйте исключения для исключительных ситуаций - Предоставляйте осмысленные сообщения об ошибках - Не поглощайте исключения без веской причины ## Специфичные для языка правила ### JavaScript/TypeScript - Следуйте руководству по стилю JavaScript Airbnb - Используйте возможности ES6+, когда это уместно - Используйте TypeScript для обеспечения безопасности типов - Предпочитайте шаблоны функционального программирования ```javascript // Предпочитайте const вместо let, когда переменная не будет переназначена const PI = 3.14159; // Используйте литералы шаблонов для интерполяции строк const greeting = `Hello, ${name}!`; // Используйте деструктурирующее присваивание const { firstName, lastName } = user; // Используйте стрелочные функции для коротких обратных вызовов const doubled = numbers.map(n =&gt; n * 2); ``` ### Python - Следуйте руководству по стилю PEP 8 - Используйте подсказки типов (PEP 484) - Предпочитайте списочные/словарные включения для простых случаев - Используйте менеджеры контекста для управления ресурсами ```python # Используйте списочные включения для простых преобразований doubled = [n * 2 для n в числах] # Используйте менеджеры контекста для управления ресурсами с open(&quot;file.txt&quot;, &quot;r&quot;) as f: content = f.read() # Используйте подсказки типов def greet(name: str) -&gt; str: return f&quot;Hello, {name}!&quot; ``` ### HTML/CSS - Используйте семантические элементы HTML - Следуйте методологии BEM для классов CSS - Минимизируйте встроенные стили - Используйте переменные CSS для тематизации ```html <!-- Use semantic HTML --><article class="card"><header class="card__header"><h2 class="card__title"> Заголовок</h2></header><div class="card__content"><p> Содержание здесь</p></div></article> ``` ```css /* Используйте переменные CSS для тематизации */ :root { --primary-color: #3498db; --secondary-color: #2ecc71; } .card { border: 1px solid var(--primary-color); } /* Следуйте методологии BEM */ .card__header { background-color: var(--primary-color); } .card__title { font-size: 1.5rem; } ``` ## Контроль версий ### Сообщения о коммитах - Пишите понятные, описательные сообщения о коммитах - Используйте повелительное наклонение («Добавить функцию», а не «Добавлена функция») - При необходимости ссылайтесь на номера проблем - Следуйте общепринятому формату коммитов ``` подвиг: добавьте систему аутентификации пользователей - Реализуйте аутентификацию на основе JWT - Добавьте конечные точки входа и регистрации - Создайте промежуточное ПО аутентификации Закрывает #123 ``` ### Стратегия ветвления - Используйте ветви функций для новой разработки - Поддерживайте стабильность основной/главной ветви - Используйте запросы на извлечение для проверки кода - Удаляйте ветви после слияния ### Обзоры кода - Проверяйте весь код перед слиянием - Сосредоточьтесь на архитектуре, безопасности и производительности - Будьте конструктивны и уважительны в комментариях - Используйте автоматизированные инструменты для выявления проблем со стилем ## Заключение Это руководство по стилю разработано для обеспечения согласованности и качества во всей кодовой базе WhytCard. Хотя оно охватывает общие принципы, более подробные правила см. в руководствах по конкретным языкам. Помните, что цель состоит в создании поддерживаемого, читаемого и надежного кода. Все члены команды должны следовать этим рекомендациям и помогать обеспечивать их соблюдение посредством проверок кода и наставничества. --- Последнее обновление: 2025-01-15 
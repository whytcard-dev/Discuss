# 코드 품질 표준

## 핵심 원칙

- 깔끔하고 유지 관리가 용이하며 자체 문서화가 가능한 코드 작성
- SOLID 및 DRY 원칙 준수
- 함수를 작고 집중적으로 유지(단일 책임)
- 변수, 함수 및 클래스에 설명적인 명명 사용
- 프로젝트 전체에서 일관된 코드 스타일 유지
- 복잡한 로직 및 공개 API 문서화
- 기계뿐만 아니라 사람을 위한 코드 작성

## JavaScript/TypeScript 표준

### TypeScript 구성

- 엄격 모드(`"strict": true`) 사용
- 권장되는 모든 유형 검사 옵션 활성화
- 적절한 모듈 해결 구성
- 적절한 대상 ECMAScript 버전 설정
- 포함/제외 패턴 지정
- 더 깔끔한 가져오기를 위해 경로 별칭 사용

### 명명 규칙

- **변수/함수**: camelCase(`getUserData`, `calculateTotal`)
- **클래스/인터페이스/유형**: PascalCase(`UserProfile`, `ApiResponse`)
- **상수**: 대문자 ... 관련 기능
- 기능/모듈별로 코드 구성
- 파일 길이를 400줄 이하로 유지(400줄이 넘으면 분할)
- 함수 길이는 50줄 이하로 유지
- 최대 중첩 깊이: 3-4단계

### 모범 사례

- 불변성(const, readonly, Object.freeze)을 선호
- 옵셔널 체이닝 및 null 병합 사용
- 적절한 오류 처리 구현
- 필요한 경우를 제외하고 모든 유형 사용 지양
- 런타임 유형 검사에 유형 가드 사용
- 원시 promise보다 async/await 사용
- 매직 넘버 및 문자열 사용 지양(상수 사용)
- 적절한 null/undefined 검사 구현
- 중첩을 줄이기 위해 조기 반환 사용

## React 표준

### 컴포넌트 구조

- 후크가 있는 함수형 컴포넌트 선호
- 컴포넌트에 명명된 내보내기 사용
- TypeScript를 사용하여 속성 검증 구현
- 복잡한 로직을 사용자 정의 후크로 추출
- 컴포넌트를 UI 관련 문제에 집중 유지
- 적절한 오류 처리 구현 경계
- 성능 최적화를 위해 React.memo 사용
- 재사용 가능한 컴포넌트 추출

### 상태 관리

- 컴포넌트별 데이터에 로컬 상태 사용
- 컴포넌트 간 공유 상태에 컨텍스트 사용
- 복잡한 앱의 경우 외부 상태 관리 고려
- 상태를 정규화하고 최소화
- 적절한 상태 초기화 구현
- 복잡한 상태 로직에는 리듀서 사용
- 속성 드릴링 방지(컴포지션 또는 컨텍스트 사용)

### 성능 최적화

- 순수 컴포넌트에는 React.memo 사용
- 비용이 많이 드는 계산에는 useMemo 구현
- 함수 메모이제이션에는 useCallback 사용
- 긴 목록 가상화(react-window, react-virtualized)
- 후크에 적절한 종속성 배열 구현
- 불필요한 재렌더링 방지
- 병목 현상 식별을 위해 React Profiler 사용

## 테스트 표준

### 단위 테스트

- 모든 비즈니스 로직 및 유틸리티 테스트
- 테스트 러너로 Jest 또는 Vitest 사용
- 구현 적절한 종속성 모의
- 컴포넌트 테스트에 테스트 라이브러리 사용
- AAA 패턴(Arrange, Act, Assert) 준수
- 설명적인 테스트 이름 작성
- 80% 이상의 코드 커버리지 목표
- 엣지 케이스 및 오류 시나리오 테스트

### 통합 테스트

- 컴포넌트 상호작용 테스트
- 폼 제출 및 사용자 흐름 테스트
- API 모의에 MSW 사용
- 라우팅 및 탐색 테스트
- 상태 변경 검증
- 현실적인 데이터로 테스트

### 엔드 투 엔드 테스트

- Cypress 또는 Playwright 사용
- 중요한 사용자 여정 테스트
- 여러 브라우저에서 테스트
- 적절한 테스트 격리 구현
- 테스트 선택기에 데이터 속성 사용
- 불안정한 테스트에 대한 재시도 로직 구현
- 접근성 테스트

## 코드 검토 표준

### 프로세스

- 모든 코드는 병합 전에 검토되어야 함
- 검토 전에 자동화된 검사를 통과해야 함
- 풀 리퀘스트 템플릿 사용
- 유지 PR은 작고 집중적이어야 합니다.
- 리뷰 의견에 신속하게 응답해야 합니다.
- 병합 전 모든 의견을 해결해야 합니다.
- 병합 전 커밋을 스쿼시해야 합니다.

### 리뷰 체크리스트

- 코드가 프로젝트 표준을 준수해야 합니다.
- 테스트가 포함되어 통과해야 합니다.
- 문서가 업데이트되어야 합니다.
- 보안 취약점이 없어야 합니다.
- 성능에 미치는 영향을 고려해야 합니다.
- 접근성 요구 사항을 충족해야 합니다.
- 예외 상황을 처리해야 합니다.
- 불필요한 코드나 종속성이 없어야 합니다.

## 도구

### 린팅 및 서식 지정

- 적절한 규칙을 적용한 ESLint
- 일관된 서식 지정을 위한 Prettier
- 커밋 전 후크를 위한 Husky
- 증분 린팅을 위한 lint-staged
- 유형 검사를 위한 TypeScript 컴파일러
- CSS/SCSS를 위한 Stylelint

### 정적 분석

- SonarQube 또는 CodeClimate
- 복잡성 지표 모니터링
- 중복 코드 감지
- 보안 취약점 스캐닝
- 번들 크기 분석
- 미사용 코드 감지

### CI/CD 통합

- 모든 PR에 대한 모든 검사 실행
- 검사 실패 시 병합 차단
- 테스트 커버리지 보고서 생성 및 게시
- 성능 회귀 테스트 구현
- 종속성 업데이트 자동화
- 미리보기 환경 배포
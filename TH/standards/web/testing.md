# มาตรฐานการทดสอบเว็บ 

## ปรัชญาการทดสอบ 

- ทดสอบตั้งแต่เนิ่นๆ และทดสอบบ่อยครั้ง 
- ทำการทดสอบอัตโนมัติทุกครั้งที่ทำได้ 
- ทดสอบในระดับที่เหมาะสม (ยูนิต, การรวม, e2e) 
- เขียนการทดสอบที่สามารถบำรุงรักษาได้และเชื่อถือได้ 
- ทดสอบทั้งเส้นทางที่ราบรื่นและกรณีขอบ 
- ใช้การทดสอบเพื่อป้องกันการถดถอย 
- กำหนดลำดับความสำคัญของการทดสอบตามผลกระทบต่อธุรกิจ 
- ปฏิบัติต่อโค้ดการทดสอบด้วยความเอาใจใส่เช่นเดียวกับโค้ดการผลิต 

## ประเภทการทดสอบและการครอบคลุม 

### การทดสอบยูนิต 

- **เป้าหมาย**: ฟังก์ชัน ส่วนประกอบ และโมดูลแต่ละรายการ 
- **เป้าหมายการครอบคลุม**: 80% ขึ้นไปของตรรกะทางธุรกิจและยูทิลิตี้ 
- **เครื่องมือ**: Jest, Vitest, ไลบรารีการทดสอบ React 
- **แนวทางปฏิบัติที่ดีที่สุด**: 
- ปฏิบัติตามรูปแบบ AAA (Arrange, Act, Assert) 
- ยืนยันหนึ่งครั้งต่อการทดสอบเมื่อทำได้ 
- จำลองการอ้างอิงภายนอก 
- ทดสอบกรณีขอบและเงื่อนไขข้อผิดพลาด 
- ทำให้การทดสอบรวดเร็ว (< 100ms ต่อการทดสอบ) 
- ใช้ชื่อการทดสอบที่อธิบายได้ 
- แยกการทดสอบออกจากกัน 

### การทดสอบการรวมระบบ 

- **เป้าหมาย**: การโต้ตอบระหว่างส่วนประกอบและบริการ 
- **เป้าหมายการครอบคลุม**: กระแสผู้ใช้ที่สำคัญและการโต้ตอบของส่วนประกอบ 
- **เครื่องมือ**: ไลบรารีการทดสอบ React, MSW, Supertest 
- **แนวทางปฏิบัติที่ดีที่สุด**: 
- ทดสอบองค์ประกอบของส่วนประกอบ 
- ทดสอบการส่งแบบฟอร์ม 
- จำลองการตอบสนองของ API 
- ทดสอบการเปลี่ยนแปลงสถานะ 
- ตรวจสอบการอัปเดต DOM 
- ทดสอบการกำหนดเส้นทางและการนำทาง 
- ใช้ข้อมูลการทดสอบที่สมจริง 

### การทดสอบแบบครบวงจร 

- **เป้าหมาย**: กระแสผู้ใช้ที่สมบูรณ์ตั้งแต่ UI ไปจนถึงแบ็กเอนด์ 
- **เป้าหมายการครอบคลุม**: เส้นทางธุรกิจที่สำคัญและเส้นทางของผู้ใช้ 
- **เครื่องมือ**: Cypress, Playwright 
- **แนวทางปฏิบัติที่ดีที่สุด**: 
- มุ่งเน้นไปที่เส้นทางผู้ใช้ที่สำคัญ 
- ทดสอบบนเบราว์เซอร์หลายตัว 
- ใช้ ตัวเลือกเสถียร (data-testid) 
- ตั้งค่าสภาพแวดล้อมการทดสอบแบบแยกส่วน 
- จัดการข้อมูลการทดสอบอย่างมีประสิทธิภาพ 
- จับภาพหน้าจอเมื่อเกิดความล้มเหลว 
- นำตรรกะการลองใหม่ไปใช้สำหรับการทดสอบที่ไม่แน่นอน 

### การทดสอบการถดถอยทางภาพ 

- **เป้าหมาย**: รูปลักษณ์และเค้าโครงของ UI 
- **เป้าหมายการครอบคลุม**: ส่วนประกอบและหน้า UI ที่สำคัญ 
- **เครื่องมือ**: Percy, Chromatic, Playwright 
- **แนวทางปฏิบัติที่ดีที่สุด**: 
- จับภาพหน้าจอพื้นฐาน 
- ทดสอบในช่องมองภาพต่างๆ 
- ละเว้นเนื้อหาแบบไดนามิก 
- ตรวจสอบการเปลี่ยนแปลงภาพอย่างระมัดระวัง 
- ทดสอบโหมดสว่าง/มืด 
- ทดสอบด้วยความยาวเนื้อหาที่แตกต่างกัน 
- รวมเข้ากับไปป์ไลน์ CI/CD 

### การทดสอบการเข้าถึง 

- **เป้าหมาย**: การปฏิบัติตาม WCAG และปัญหาการเข้าถึง 
- **เป้าหมายการครอบคลุม**: ส่วนประกอบและหน้าทั้งหมดที่ผู้ใช้เห็น 
- **เครื่องมือ**: axe, Lighthouse, WAVE 
- **ดีที่สุด แนวทางปฏิบัติ**: 
- ทดสอบการนำทางด้วยแป้นพิมพ์ 
- ตรวจสอบความเข้ากันได้ของโปรแกรมอ่านหน้าจอ 
- ตรวจสอบคอนทราสต์ของสี 
- ทดสอบการจัดการโฟกัส 
- ตรวจสอบแอตทริบิวต์ ARIA 
- ทดสอบด้วยเทคโนโลยีช่วยเหลือ 
- ทำการตรวจสอบการเข้าถึงพื้นฐานโดยอัตโนมัติ 

### การทดสอบประสิทธิภาพ 

- **เป้าหมาย**: เวลาโหลดหน้า ประสิทธิภาพการเรนเดอร์ 
- **เป้าหมายการครอบคลุม**: หน้าสำคัญและเส้นทางผู้ใช้ที่สำคัญ 
- **เครื่องมือ**: Lighthouse, WebPageTest, k6 
- **แนวทางปฏิบัติที่ดีที่สุด**: 
- วัดค่า Core Web Vitals 
- ทดสอบบนอุปกรณ์ระดับล่าง 
- จำลองการลดความเร็วเครือข่าย 
- ตรวจสอบขนาดบันเดิล 
- ทดสอบด้วยสถานการณ์แคชที่สมจริง 
- วัดเวลาสำหรับการโต้ตอบ 
- กำหนดงบประมาณประสิทธิภาพ 

## แนวทางปฏิบัติการทดสอบ 

### การจัดระเบียบการทดสอบ 

- จัดกลุ่มการทดสอบอย่างมีตรรกะตามคุณลักษณะหรือส่วนประกอบ 
- ใช้ชื่อไฟล์และคำอธิบายการทดสอบที่อธิบายได้ 
- แยกยูทิลิตี้และฟิกซ์แพ็กการทดสอบ 
- จัดระเบียบการทดสอบใน ลำดับชั้นที่สะท้อนฐานโค้ด 
- เก็บไฟล์ทดสอบไว้ใกล้กับโค้ดที่ทดสอบ 
- ใช้รูปแบบการตั้งชื่อที่สอดคล้องกัน 
- แยกการทดสอบยูนิต การรวม และ e2e 

### การจัดการข้อมูลการทดสอบ 

- ใช้โรงงานหรือผู้สร้างสำหรับข้อมูลการทดสอบ 
- หลีกเลี่ยงข้อมูลการทดสอบที่เขียนโค้ดตายตัว 
- ใช้ข้อมูลที่สมจริงที่ตรงกับรูปแบบการผลิต 
- รีเซ็ตสถานะการทดสอบระหว่างการทดสอบ 
- แยกสภาพแวดล้อมการทดสอบ 
- พิจารณาความเป็นส่วนตัวของข้อมูลในข้อมูลการทดสอบ 
- ใช้ข้อมูลสุ่มแบบกำหนดค่าสำหรับกรณีขอบ 

### การล้อเลียนและการแยกส่วน 

- จำลองการอ้างอิงภายนอก (API, บริการ) 
- ใช้คำตอบจำลองที่สมจริง 
- รีเซ็ตการล้อเลียนระหว่างการทดสอบ 
- หลีกเลี่ยงการล้อเลียนมากเกินไป 
- ล้อเลียนในระดับที่เหมาะสม 
- บันทึกพฤติกรรมการล้อเลียน 
- ใช้ MSW สำหรับล้อเลียน API 

### การบูรณาการอย่างต่อเนื่อง 

- เรียกใช้การทดสอบในทุกคำขอการดึง 
- ดำเนินการทดสอบแบบขนาน 
- ตั้งค่าการรายงานการทดสอบและแดชบอร์ด 
- กำหนดค่าการแจ้งเตือนการทดสอบล้มเหลว
- นำการทดสอบซ้ำไปใช้กับการทดสอบที่ไม่เสถียร
- แคชการทดสอบที่พึ่งพากัน
- เรียกใช้ประเภทการทดสอบต่างๆ ในขั้นตอนที่เหมาะสม

## การพัฒนาที่ขับเคลื่อนด้วยการทดสอบ (TDD)

- เขียนการทดสอบก่อนนำฟีเจอร์ไปใช้
- ปฏิบัติตามวงจรสีแดง-เขียว-รีแฟกเตอร์
- เริ่มต้นด้วยกรณีทดสอบง่ายๆ
- เพิ่มความซับซ้อนทีละน้อย
- ใช้การทดสอบเพื่อขับเคลื่อนการออกแบบ
- รีแฟกเตอร์การทดสอบตามการพัฒนาของโค้ด
- เน้นที่พฤติกรรม ไม่ใช่การใช้งาน

## การบำรุงรักษาการทดสอบ

- ตรวจสอบและอัปเดตการทดสอบเป็นประจำ
- ลบหรือแก้ไขการทดสอบที่ไม่เสถียร
- รีแฟกเตอร์การทดสอบด้วยการเปลี่ยนแปลงโค้ด
- ตรวจสอบประสิทธิภาพการทดสอบ
- วิเคราะห์การครอบคลุมการทดสอบเป็นประจำ
- บันทึกกลยุทธ์การทดสอบ
- ฝึกอบรมสมาชิกในทีมเกี่ยวกับแนวทางการทดสอบ

## การทดสอบเฉพาะทาง

### การทดสอบ API

- ทดสอบจุดสิ้นสุด API ทั้งหมด
- ตรวจสอบรูปแบบคำขอ/การตอบสนอง
- ทดสอบการรับรองความถูกต้องและการอนุญาต
- ทดสอบการจัดการข้อผิดพลาดและรหัสสถานะ
- ตรวจสอบความถูกต้อง ตรรกะทางธุรกิจ 
- การจำกัดอัตราการทดสอบและโควตา 
- จัดทำเอกสารกรณีการทดสอบ API 

### การทดสอบการจัดการสถานะ 

- ทดสอบการเปลี่ยนสถานะ 
- ตรวจสอบสถานะเริ่มต้น 
- ทดสอบตัวลดและการดำเนินการ 
- ทดสอบตัวเลือกและสถานะที่ได้มา 
- จำลองการอ้างอิงภายนอก 
- ทดสอบการเปลี่ยนแปลงสถานะแบบอะซิงโครนัส 
- ตรวจสอบการคงอยู่ของสถานะ 

### การทดสอบแบบฟอร์ม 

- ทดสอบการส่งแบบฟอร์ม 
- ตรวจสอบอินพุตแบบฟอร์ม 
- ทดสอบสถานะข้อผิดพลาด 
- ทดสอบฟังก์ชันรีเซ็ตแบบฟอร์ม 
- ทดสอบตรรกะแบบฟอร์มแบบมีเงื่อนไข 
- ตรวจสอบการเข้าถึงองค์ประกอบแบบฟอร์ม 
- ทดสอบแบบฟอร์มด้วยการนำทางด้วยแป้นพิมพ์ 

### การทดสอบความปลอดภัย 

- ทดสอบขั้นตอนการรับรองความถูกต้อง 
- ตรวจสอบการตรวจสอบการอนุญาต 
- ทดสอบกับช่องโหว่ทั่วไป (XSS, CSRF) 
- ตรวจสอบการล้างข้อมูลอินพุต 
- ทดสอบความปลอดภัยในการอัปโหลดไฟล์ 
- ตรวจสอบส่วนหัวที่ปลอดภัย 
- ทดสอบกับ OWASP 10 อันดับแรก
# Стандарти веб-тестування

## Філософія тестування

- Тестуйте на ранній стадії та тестуйте часто
- Автоматизуйте тести, де це можливо
- Тестуйте на відповідних рівнях (модульний, інтеграційний, e2e)
- Пишіть зручні та надійні тести
- Тестуйте як щасливі шляхи, так і крайні випадки
- Використовуйте тестування для запобігання регресіям
- Пріоритет тестів на основі впливу на бізнес
- Ставтеся до тестового коду з такою ж обережністю, як і до продакшн-коду

## Типи тестів та покриття

### Модульне тестування

- **Ціль**: Окремі функції, компоненти та модулі
- **Мета покриття**: понад 80% бізнес-логіки та утиліт
- **Інструменти**: Jest, Vitest, бібліотека тестування React
- **Найкращі практики**:
- Дотримуйтесь шаблону AAA (Arrange, Act, Assert)
- Одне твердження на тест, коли це можливо
- Імітуйте зовнішні залежності
- Тестуйте крайні випадки та умови помилок
- Забезпечте швидкість тестування (< 100 мс на тест)
- Використовуйте описові назви тестів
- Ізолюйте тести один від одного

### Інтеграційне тестування

- **Ціль**: Взаємодія між компонентами та сервісами
- **Мета покриття**: Критичні потоки користувачів та взаємодія компонентів
- **Інструменти**: Бібліотека тестування React, MSW, Supertest
- **Найкращі практики**:
- Тестування композицій компонентів
- Тестування надсилання форм
- Моделювання відповідей API
- Зміни стану тестування
- Перевірка оновлень DOM
- Тестування маршрутизації та навігації
- Використання реалістичних тестових даних

### Комплексне тестування

- **Ціль**: Завершення потоків користувачів від інтерфейсу користувача до бекенду
- **Мета покриття**: Критичні бізнес-шляхи та шляхи користувачів
- **Інструменти**: Cypress, Playwright
- **Найкращі практики**:
- Зосередження на критичних шляхах користувачів
- Тестування в кількох браузерах
- Використання стабільних селекторів (data-testid)
- Налаштування ізольованих тестових середовищ
- Ефективне керування тестовими даними
- Роблення скріншотів у разі невдач
- Реалізація логіки повторних спроб для Нестабільні тести

### Тестування візуальної регресії

- **Ціль**: Зовнішній вигляд та макет інтерфейсу користувача
- **Мета покриття**: Ключові компоненти та сторінки інтерфейсу користувача
- **Інструменти**: Percy, Chromatic, Playwright
- **Найкращі практики**:
- Зробити базові знімки екрана
- Тестувати на різних екранах
- Ігнорувати динамічний контент
- Ретельно переглянути візуальні зміни
- Тестувати світлі/темні режими
- Тестувати з різною довжиною контенту
- Інтегрувати з конвеєром CI/CD

### Тестування доступності

- **Ціль**: Відповідність WCAG та проблеми доступності
- **Мета покриття**: Усі компоненти та сторінки, що орієнтовані на користувача
- **Інструменти**: axe, Lighthouse, WAVE
- **Найкращі практики**:
- Тестувати навігацію за допомогою клавіатури
- Перевірити сумісність зчитувача з екрана
- Перевірити контрастність кольорів
- Тестувати керування фокусом
- Перевірити атрибути ARIA
- Тестувати за допомогою допоміжних технологій
- Автоматизувати базові перевірки доступності

### Продуктивність Тестування

- **Ціль**: Час завантаження сторінки, продуктивність рендерингу
- **Ціль покриття**: Ключові сторінки та критичні шляхи користувачів
- **Інструменти**: Lighthouse, WebPageTest, k6
- **Найкращі практики**:
- Вимірювання основних показників веб-сайту
- Тестування на низькопродуктивних пристроях
- Моделювання обмеження мережі
- Моніторинг розміру пакета
- Тестування з реалістичними сценаріями кешування
- Вимірювання часу до інтерактивного стану
- Встановлення бюджетів продуктивності

## Практика тестування

### Організація тестування

- Логічно групуйте тести за функціями або компонентами
- Використовуйте описові назви файлів та описи тестів
- Розділяйте утиліти та фікстури тестування
- Організуйте тести в ієрархії, яка відображає кодову базу
- Зберігайте тестові файли близько до коду, який вони тестують
- Використовуйте узгоджені правила іменування
- Розділяйте модульні, інтеграційні та e2e тести

### Керування тестовими даними

- Використовуйте фабрики або конструктори для тестових даних
- Уникайте жорстко закодованих тестових даних
- Використовуйте реалістичні дані, що відповідають виробничим шаблонам
- Скидання стану тестування між тестами
- Ізолюйте тестові середовища
- Враховуйте конфіденційність даних у тестових даних
- Використовуйте випадкові дані з початковим значенням для граничних випадків

### Імітація та заглушення

- Імітуйте зовнішні залежності (API, сервіси)
- Використовуйте реалістичні імітаційні відповіді
- Скидайте імітації між тестами
- Уникайте надмірної імітації
- Імітуйте на відповідному рівні
- Документуйте поведінку імітації
- Використовуйте MSW для імітації API

### Безперервна інтеграція

- Запускайте тести для кожного запиту на втягування
- Реалізуйте паралельне виконання тестів
- Налаштуйте звітність про тести та інформаційні панелі
- Налаштуйте сповіщення про невдалі тести
- Реалізуйте повторні спроби тестування для нестабільних тестів
- Кешуйте залежності тестів
- Запускайте різні типи тестів на відповідних етапах

## Розробка на основі тестування (TDD)

- Пишіть тести перед впровадженням функцій
- Дотримуйтесь циклу червоного-зеленого-рефакторингу
- Починайте з простих тестових випадків
- Поступово додавайте складність
- Використовуйте тести для керування дизайном
- Рефакторуйте тести в міру розвитку коду
- Зосередьтеся на поведінці, а не впровадження 

## Обслуговування тестів 

- Регулярно переглядати та оновлювати тести 
- Видаляти або виправляти ненадійні тести 
- Рефакторинг тестів зі змінами коду 
- Моніторинг продуктивності тестів 
- Регулярний аналіз покриття тестами 
- Документувати стратегію тестування 
- Навчати членів команди методам тестування 

## Спеціалізоване тестування 

### Тестування API 

- Тестування всіх кінцевих точок API 
- Перевірка схем запитів/відповідей 
- Тестування автентифікації та авторизації 
- Тестування обробки помилок та кодів стану 
- Перевірка бізнес-логіки 
- Обмеження швидкості тестування та квоти 
- Документування тестових випадків API 

### Тестування керування станами 

- Тестування переходів станів 
- Перевірка початкового стану 
- Тестування редукторів та дій 
- Тестування селекторів та похідного стану 
- Моделювання зовнішніх залежностей 
- Тестування асинхронних змін стану 
- Перевірка збереження стану 

### Тестування форм 

- Тестування надсилання форм 
- Перевірка введених даних форми 
- Тестування станів помилок 
- Тестування функціональності скидання форми 
- Тестування умовної логіки форми 
- Перевірка доступності форми елементи 
- Тестова форма з навігацією за допомогою клавіатури 

### Тестування безпеки 

- Тестування процесів автентифікації 
- Перевірка перевірок авторизації 
- Тестування на поширені вразливості (XSS, CSRF) 
- Перевірка санітарної обробки вхідних даних 
- Тестування безпеки завантаження файлів 
- Перевірка захищених заголовків 
- Тестування на відповідність топ-10 OWASP
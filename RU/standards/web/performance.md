# Стандарты производительности веб-сайта

## Цели производительности

- Оценка Lighthouse: 90+ для всех показателей
- Цели основных показателей Web Vitals:
- LCP (наибольшая отрисовка контента): < 2,5 с
- FID (задержка первого ввода): < 100 мс
- CLS (кумулятивный сдвиг макета): < 0,1
- INP (взаимодействие до следующей отрисовки): < 200 мс
- Время до интерактивности: < 3 с
- Первая отрисовка контента: < 1,8 с
- Общий вес страницы: < 1 МБ (в идеале < 500 КБ)
- HTTP-запросы: < 50 на страницу

## Оптимизация изображений

- Используйте форматы WebP/AVIF с резервными вариантами для старых браузеров
- Реализуйте адаптивные изображения с атрибутами `srcset` и `sizes`
- Отложенная загрузка изображений под сгибом
- Правильный размер изображения (избегайте обслуживания больших изображений, уменьшенных с помощью CSS) 
- Используйте CDN изображений для динамического изменения размера, когда это возможно 
- Оптимизируйте SVG и удаляйте ненужные метаданные 
- Сжимайте все изображения с помощью таких инструментов, как ImageOptim, TinyPNG или Squoosh 
- Рассмотрите технику размытия для прогрессивной загрузки 

## Оптимизация JavaScript 

- Реализуйте разделение кода и динамический импорт 
- Отложите некритический JavaScript 
- Используйте tree-shaking для устранения мертвого кода 
- Уменьшите и сожмите файлы JavaScript 
- Избегайте JavaScript, блокирующего рендеринг 
- Используйте веб-работников для задач, интенсивно использующих процессор 
- Реализуйте приоритизацию запросов 
- Оптимизируйте сторонние скрипты и используйте атрибуты async/defer 

## Оптимизация CSS 

- Минимизируйте и встраивайте критический CSS 
- Удалите неиспользуемый CSS с помощью таких инструментов, как PurgeCSS 
- Избегайте импорта CSS (вместо этого используйте конкатенацию) 
- Используйте сдерживание CSS для независимых компонентов 
- Оптимизируйте Селекторы CSS для производительности
- Рассмотрите влияние CSS-in-JS на производительность
- Используйте переменные CSS для лучшей поддержки
- Реализуйте разделение кода CSS для больших приложений

## Оптимизация шрифтов

- Используйте системные шрифты, когда это возможно
- Реализуйте font-display: swap или необязательно
- Подмножество шрифтов для включения только необходимых символов
- Самостоятельное размещение шрифтов вместо использования сторонних служб
- Предварительная загрузка критических шрифтов
- Используйте переменные шрифты для нескольких жирностей/стилей
- Ограничьте вариации шрифтов (жирности, стили)

## Стратегия кэширования

- Реализуйте эффективные политики кэширования
- Длинный кэш для статических ресурсов (1 год+)
- Короткий/отсутствие кэширования для HTML
- Используйте версионные имена файлов или строки запросов для очистки кэша
- Реализуйте Service Workers для автономной поддержки
- Используйте localStorage/IndexedDB для клиентского кэширования
- Правильно настройте заголовки кэша HTTP
- Реализовать кэширование CDN 

## Оптимизация сервера 

- Включить HTTP/2 или HTTP/3 
- Реализовать сжатие на стороне сервера (Brotli/Gzip) 
- Использовать CDN для глобальной доставки контента 
- Оптимизировать ответы API (пагинация, выбор полей) 
- Реализовать периферийные вычисления для динамического контента 
- Настроить правильные параметры CORS 
- Оптимизировать время до первого байта (TTFB) 
- Использовать подсказки предварительного подключения, предварительной выборки и предварительной загрузки HTTP 

## Оптимизация мобильных устройств 

- Приоритет мобильной производительности (подход, ориентированный на мобильные устройства) 
- Оптимизировать цели касания (мин. 44×44 пикселя) 
- Уменьшить полезную нагрузку сети для мобильных устройств 
- Реализовать шаблоны адаптивного дизайна 
- Тестировать на реальных мобильных устройствах, а не только на эмуляторах 
- Рассмотреть возможность сокращения движения для анимации 
- Оптимизировать для сценариев офлайн/плохого подключения 

## Мониторинг и тестирование 

- Реализовать реальные Мониторинг пользователей (RUM) 
- Настройка синтетического мониторинга для критически важных потоков пользователей 
- Использование WebPageTest для детального анализа производительности 
- Мониторинг основных веб-показателей в Google Search Console 
- Настройка бюджетов производительности и оповещений 
- Регулярные проверки производительности 
- Реализация A/B-тестирования для повышения производительности 
- Использование панели производительности Chrome DevTools для профилирования 

## Расширенные методы 

- Реализация подсказок ресурсов (предварительное подключение, предварительная загрузка, предварительная выборка) 
- Использование наблюдателя пересечений для отложенной загрузки 
- Рассмотрите возможность рендеринга на стороне сервера или создания статического сайта 
- Реализация шаблона stale-while-revalidate 
- Использование requestIdleCallback для некритических задач 
- Рассмотрите возможность импорта карт для загрузки модулей 
- Реализация предиктивной предварительной выборки на основе поведения пользователя 
- Использование приоритетных подсказок для критически важных ресурсов
# 웹 성능 기준

## 성능 목표

- Lighthouse 점수: 모든 지표에서 90점 이상
- 핵심 웹 바이탈 목표:
- LCP(Largest Contentful Paint): < 2.5초
- FID(First Input Delay): < 100ms
- CLS(Cumulative Layout Shift): < 0.1
- INP(Interaction to Next Paint): < 200ms
- 상호작용 시간: < 3초
- First Contentful Paint: < 1.8초
- 총 페이지 크기: < 1MB (이상적으로는 < 500KB)
- HTTP 요청: < 페이지당 50개

## 이미지 최적화

- 이전 브라우저를 위한 폴백 기능을 갖춘 WebP/AVIF 형식 사용
- `srcset` 및 `sizes` 속성을 사용하여 반응형 이미지 구현
- 폴드 아래에 있는 이미지 지연 로드
- 이미지 크기 적절히 조정(큰 이미지 축소하여 제공하지 않도록 주의) CSS를 통해)
- 가능하면 동적 크기 조정을 위해 이미지 CDN을 사용하세요.
- SVG를 최적화하고 불필요한 메타데이터를 제거하세요.
- ImageOptim, TinyPNG, Squoosh와 같은 도구를 사용하여 모든 이미지를 압축하세요.
- 점진적 로딩을 위해 블러업 기법을 고려하세요.

## JavaScript 최적화

- 코드 분할 및 동적 가져오기 구현
- 중요하지 않은 JavaScript 지연
- 불필요한 코드를 제거하기 위해 트리 쉐이킹 사용
- JavaScript 파일 최소화 및 압축
- 렌더링 차단 JavaScript 사용 금지
- CPU 사용량이 많은 작업에는 웹 워커 사용
- 요청 우선순위 지정 구현
- 타사 스크립트 최적화 및 비동기/지연 속성 사용

## CSS 최적화

- 중요한 CSS 최소화 및 인라인 처리
- PurgeCSS와 같은 도구를 사용하여 사용하지 않는 CSS 제거
- CSS 가져오기 사용 금지(대신 연결 사용)
- 독립적인 구성 요소에 CSS 포함 사용
- 성능을 위해 CSS 선택자 최적화
- CSS-in-JS 성능 영향 고려
- CSS 변수 사용 유지 관리 용이성 향상
- 대규모 애플리케이션에 CSS 코드 분할 구현

## 글꼴 최적화

- 가능하면 시스템 글꼴 사용
- font-display: swap 또는 optional 구현
- 필요한 문자만 포함하도록 글꼴 하위 집합 설정
- 타사 서비스 대신 자체 호스팅 글꼴 사용
- 중요한 글꼴 미리 로드
- 여러 굵기/스타일에 가변 글꼴 사용
- 글꼴 변형(굵기, 스타일) 제한

## 캐싱 전략

- 효과적인 캐시 정책 구현
- 정적 에셋에 긴 캐시(1년 이상) 사용
- HTML에 짧은 캐시/캐시 없음
- 캐시 무효화를 위해 버전이 지정된 파일 이름 또는 쿼리 문자열 사용
- 오프라인 지원을 위한 서비스 워커 구현
- 클라이언트 측 캐싱에 localStorage/IndexedDB 사용
- HTTP 캐시 헤더를 올바르게 구성
- CDN 캐싱 구현

## 서버 최적화

- HTTP/2 또는 HTTP/3 활성화
- 서버 측 압축(Brotli/Gzip) 구현
- 글로벌 콘텐츠 전송에 CDN 사용
- API 응답 최적화(페이지 매김, 필드 선택)
- 동적 콘텐츠에 대한 엣지 컴퓨팅 구현
- 적절한 CORS 설정 구성
- TTFB(Time to First Byte) 최적화
- HTTP 사전 연결, 프리페치 및 사전 로드 힌트 사용

## 모바일 최적화

- 모바일 성능 우선 순위 지정(모바일 우선 접근 방식)
- 터치 대상 최적화(최소 44x44px)
- 모바일 기기의 네트워크 페이로드 감소
- 반응형 디자인 패턴 구현
- 에뮬레이터뿐 아니라 실제 모바일 기기에서 테스트
- 애니메이션의 모션 감소 고려
- 오프라인/연결 불량 시나리오 최적화

## 모니터링 및 테스트

- 실제 사용자 모니터링(RUM) 구현
- 중요한 사용자 흐름에 대한 종합적 모니터링 설정
- WebPageTest를 사용하여 상세 성능 분석
- Google Search Console에서 핵심 웹 바이탈 모니터링
- 성능 예산 및 알림 설정
- 정기적인 성능 감사 수행
- A/B 테스트 구현 성능 개선
- 프로파일링에 Chrome DevTools 성능 패널 사용

## 고급 기술

- 리소스 힌트(preconnect, preload, prefetch) 구현
- 지연 로딩에 교차 관찰자 사용
- 서버 측 렌더링 또는 정적 사이트 생성 고려
- 재검증 중 부실 패턴 구현
- 중요하지 않은 작업에 requestIdleCallback 사용
- 모듈 로딩에 import 맵 사용
- 사용자 동작 기반 예측 프리페칭 구현
- 중요한 리소스에 우선순위 힌트 사용
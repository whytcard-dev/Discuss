# มาตรฐานประสิทธิภาพเว็บ 

## เป้าหมายประสิทธิภาพ 

- คะแนน Lighthouse: 90+ สำหรับเมตริกทั้งหมด 
- เป้าหมาย Core Web Vitals: 
- LCP (Largest Contentful Paint): < 2.5 วินาที 
- FID (First Input Delay): < 100 มิลลิวินาที 
- CLS (Cumulative Layout Shift): < 0.1 
- INP (Interaction to Next Paint): < 200 มิลลิวินาที 
- เวลาในการโต้ตอบ: < 3 วินาที 
- First Contentful Paint: < 1.8 วินาที 
- น้ำหนักหน้าทั้งหมด: < 1MB (โดยปกติ < 500KB) 
- คำขอ HTTP: < 50 ต่อหน้า 

## การเพิ่มประสิทธิภาพรูปภาพ 

- ใช้รูปแบบ WebP/AVIF พร้อมระบบสำรองสำหรับเบราว์เซอร์รุ่นเก่า 
- ใช้รูปภาพที่ตอบสนองด้วยแอตทริบิวต์ `srcset` และ `sizes` 
- โหลดรูปภาพแบบ Lazy ในส่วนด้านล่าง 
- ปรับขนาดรูปภาพให้เหมาะสม (หลีกเลี่ยงการแสดง ภาพขนาดใหญ่ที่ปรับขนาดลงโดยใช้ CSS) 
- ใช้ CDN ของภาพเพื่อปรับขนาดแบบไดนามิกเมื่อทำได้ 
- ปรับแต่ง SVG และลบข้อมูลเมตาที่ไม่จำเป็น 
- บีบอัดภาพทั้งหมดด้วยเครื่องมือเช่น ImageOptim, TinyPNG หรือ Squoosh 
- พิจารณาเทคนิคเบลอภาพสำหรับการโหลดแบบก้าวหน้า 

## การเพิ่มประสิทธิภาพ JavaScript 

- ใช้การแยกโค้ดและการนำเข้าแบบไดนามิก 
- เลื่อน JavaScript ที่ไม่สำคัญออกไป 
- ใช้การสั่นแบบต้นไม้เพื่อกำจัดโค้ดที่ตายแล้ว 
- ย่อขนาดและบีบอัดไฟล์ JavaScript 
- หลีกเลี่ยง JavaScript ที่บล็อกการเรนเดอร์ 
- ใช้เว็บเวิร์กเกอร์สำหรับงานที่ใช้ CPU มาก 
- ใช้การกำหนดลำดับความสำคัญของคำขอ 
- ปรับแต่งสคริปต์ของบุคคลที่สามและใช้แอตทริบิวต์แบบอะซิงค์/เลื่อนออกไป 

## การเพิ่มประสิทธิภาพ CSS 

- ย่อขนาดและใส่ CSS ที่สำคัญลงในบรรทัด 
- ลบ CSS ที่ไม่ได้ใช้ด้วยเครื่องมือเช่น PurgeCSS 
- หลีกเลี่ยงการนำเข้า CSS (ใช้การเรียงต่อกันแทน) 
- ใช้การกักเก็บ CSS สำหรับส่วนประกอบอิสระ 
- ปรับแต่งตัวเลือก CSS เพื่อประสิทธิภาพ 
- พิจารณา ผลกระทบต่อประสิทธิภาพของ CSS-in-JS
- ใช้ตัวแปร CSS เพื่อการบำรุงรักษาที่ดีขึ้น
- ใช้การแยกโค้ด CSS สำหรับแอปพลิเคชันขนาดใหญ่

## การเพิ่มประสิทธิภาพแบบอักษร

- ใช้แบบอักษรของระบบเมื่อทำได้
- ใช้การแสดงแบบอักษร: สลับหรือทางเลือก
- แบ่งแบบอักษรออกเป็นชุดย่อยเพื่อรวมเฉพาะอักขระที่จำเป็น
- โฮสต์แบบอักษรด้วยตนเองแทนที่จะใช้บริการของบุคคลที่สาม
- โหลดแบบอักษรที่สำคัญไว้ล่วงหน้า
- ใช้แบบอักษรที่แปรผันสำหรับน้ำหนัก/รูปแบบต่างๆ
- จำกัดรูปแบบแบบอักษร (น้ำหนัก รูปแบบ)

## กลยุทธ์การแคช

- ใช้หลักนโยบายแคชที่มีประสิทธิภาพ
- แคชยาวสำหรับสินทรัพย์คงที่ (1 ปีขึ้นไป)

- แคชสั้น/ไม่มีสำหรับ HTML
- ใช้ชื่อไฟล์ที่มีเวอร์ชันหรือสตริงแบบสอบถามสำหรับการหยุดแคช
- ใช้เวิร์กเกอร์บริการสำหรับการสนับสนุนออฟไลน์
- ใช้ localStorage/IndexedDB สำหรับการแคชฝั่งไคลเอนต์
- กำหนดค่าส่วนหัวแคช HTTP อย่างถูกต้อง
- ใช้การแคช CDN

## เซิร์ฟเวอร์ การเพิ่มประสิทธิภาพ 

- เปิดใช้งาน HTTP/2 หรือ HTTP/3 
- ใช้การบีบอัดฝั่งเซิร์ฟเวอร์ (Brotli/Gzip) 
- ใช้ CDN สำหรับการส่งเนื้อหาทั่วโลก 
- เพิ่มประสิทธิภาพการตอบสนองของ API (การแบ่งหน้า การเลือกฟิลด์) 
- ใช้การประมวลผลแบบเอจสำหรับเนื้อหาแบบไดนามิก 
- กำหนดค่าการตั้งค่า CORS ที่เหมาะสม 
- เพิ่มประสิทธิภาพเวลาถึงไบต์แรก (TTFB) 
- ใช้การเชื่อมต่อล่วงหน้า HTTP การดึงข้อมูลล่วงหน้า และคำแนะนำการโหลดล่วงหน้า 

## การเพิ่มประสิทธิภาพมือถือ 

- ให้ความสำคัญกับประสิทธิภาพมือถือ (แนวทางที่เน้นมือถือเป็นอันดับแรก) 
- เพิ่มประสิทธิภาพเป้าหมายการสัมผัส (ขั้นต่ำ 44×44 พิกเซล) 
- ลดปริมาณโหลดเครือข่ายสำหรับอุปกรณ์มือถือ 
- ใช้รูปแบบการออกแบบที่ตอบสนอง 
- ทดสอบบนอุปกรณ์มือถือจริง ไม่ใช่แค่โปรแกรมจำลอง 
- พิจารณาลดการเคลื่อนไหวสำหรับแอนิเมชั่น 
- เพิ่มประสิทธิภาพสำหรับสถานการณ์การเชื่อมต่อออฟไลน์/ไม่ดี 

## การตรวจสอบและการทดสอบ 

- ใช้การตรวจสอบผู้ใช้จริง (RUM) 
- ตั้งค่าการตรวจสอบแบบสังเคราะห์สำหรับโฟลว์ผู้ใช้ที่สำคัญ 
- ใช้ WebPageTest สำหรับการวิเคราะห์ประสิทธิภาพโดยละเอียด
- ตรวจสอบ Core Web Vitals ใน Google Search Console
- ตั้งค่างบประมาณประสิทธิภาพและการแจ้งเตือน
- ดำเนินการตรวจสอบประสิทธิภาพเป็นประจำ
- ดำเนินการทดสอบ A/B เพื่อปรับปรุงประสิทธิภาพ
- ใช้แผงประสิทธิภาพ Chrome DevTools สำหรับการสร้างโปรไฟล์

## เทคนิคขั้นสูง

- ดำเนินการคำแนะนำทรัพยากร (การเชื่อมต่อล่วงหน้า โหลดล่วงหน้า ดึงข้อมูลล่วงหน้า)
- ใช้ตัวสังเกตจุดตัดสำหรับการโหลดแบบขี้เกียจ
- พิจารณาการเรนเดอร์ฝั่งเซิร์ฟเวอร์หรือการสร้างไซต์แบบคงที่
- ดำเนินการตามรูปแบบการตรวจสอบซ้ำเมื่อหมดอายุ
- ดำเนินการตาม requestIdleCallback สำหรับงานที่ไม่ร้ายแรง
- พิจารณาแผนที่นำเข้าสำหรับการโหลดโมดูล
- ดำเนินการดึงข้อมูลล่วงหน้าเชิงทำนายตามพฤติกรรมของผู้ใช้
- ดำเนินการตามคำแนะนำลำดับความสำคัญสำหรับทรัพยากรที่สำคัญ